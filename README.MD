# Bluetooth Developer Studio

## Example Plugin - Android hiro99ma改造版

* ベースは、[Bluetooth SIGのAndroid Plugin](https://www.bluetooth.com/develop-with-bluetooth/developer-resources-tools/bluetooth-developer-plugins)
* 改行コードをLF
* 空行をなるべく削除

## 注意点

* NotificationのみやIndicationのみのCharacteristicを作ると、対応するEditTextが生成されないためエラーになる  
	とりあえずRead属性を付けるか、手動で修正するかで対応する
* CharacteristicのUUIDを16bitにしていると、生成する文字列の一部が16bitになり、128bit-UUIDしか内部で対応していないため実行時にうまくUUIDが生成できなくなる  
	128bitにして保存することで対応する

### Author: Martin Woolley, Bluetooth SIG - Twitter: @bluetooth_mdw

#### Version: 1.1.1

__Description:__ 
This plugin generates code for an Android application which implements all GATT operations for all characteristics in the selected Bluetooth Developer Studio profile. The code generated is structured to be copied into an Android Studio project and includes Java class files which implement Bluetooth operations (and other things) and XMl files which implement a simple user interface which is designed to be thrown away and replaced with a custom UI after initial testing.  

__Instructions:__<br>
1. Install Android Studio <br>
2. Run the plugin from within Bluetooth Developer Studio<br>
3. Create a new project in Android Studio. Code generated by Bluetooth Developer Studio will be copied into this project next.<br>
4. Go to the output directory which you selected when generating your code and run the generated batch file copy_to_android_studio.bat with the path to your Android Studio project directory as an argument. e.g.<br> 
copy_to_android_studio.bat C:\workspaces\AndroidstudioProjects\BdsGeneratedClient<br> 
7. Open the Android Studio project if not already open. Build and install on an Android device for testing.
 
__Code Completion:__ To finish, you will probably want to add some filtering to the scanning process so that only relevant devices are shown on the initial scanning screen.

__Status:__ Example

__Known Issues:__

1. This plugin has had minimal testing.
2. Read, Write, Write Without Response and Notifications are the only operations supported.

__Version History:__

__1.0__ 

- Initial version which used the Android 4.x scanning APIs

__1.1__ 

- Refactored to use the Android 5.x+ scanning APIs
- Handles Android 6 new permissions system if running on an Android 6.x device, ignores the new permissions if running on a 5.x device
- Can generate scan filter code for the AD device name field in advertising packets if specified in the profile design
- Implemented button state control so that requests (requiring a response) must conclude before the user can initiate another GATT operation.
- Simple icon provided for application
- Improved basic look and feel with some colours and text size changes
- Bug Fixed: if a profile had multiple instances of a GATT attribute then this produced duplicate declarations in the generated strings.xml file.
- Bug Fixed: Write No Response property caused XML to be generated for buttons with an incorrect onClick value.

__1.1.1__
- Bug Fixed: copy_to_android_studio.bat.template included incorrect directory name amongst those that the icon file is copied to.
